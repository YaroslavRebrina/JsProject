function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},o=r.parcelRequire216a;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},r.parcelRequire216a=o),o.register("kyEFX",(function(t,r){var n,a;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return a}),(function(e){return a=e}));var o={};n=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)o[t[r]]=e[t[r]]},a=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),o("kyEFX").register(JSON.parse('{"5ZPII":"favorite.d164f92e.js","ku5PZ":"tablet.fbc49068.png","cdK6d":"icons.9b44f38f.svg"}'));const c={themeSwitcherEl:document.querySelector(".switch-checkbox"),bodyEl:document.querySelector("body"),themeContainerEl:document.querySelector(".header__theme-select"),logoEl:document.querySelector(".header-nav__logo-link"),headerLinksEl:document.querySelectorAll(".header-nav__link"),headerInputEl:document.querySelector(".header-input"),headerInputIconEl:document.querySelector(".header-input__icon"),switcherLightEl:document.querySelector(".header-checkbox__icon-light"),switcherDarkEl:document.querySelector(".header-checkbox__icon-dark"),switchTextlightEl:document.querySelector(".header__theme-select-light--on"),switchTextDarktEl:document.querySelector(".header__theme-select-dark--off")},i="theme";c.themeSwitcherEl.addEventListener("change",(function(){c.bodyEl.classList.toggle("dark-mode"),c.logoEl.classList.toggle("light-text"),c.headerLinksEl.forEach((e=>e.classList.toggle("light-text"))),c.headerInputEl.classList.toggle("header-input--dark"),localStorage.setItem(i,c.bodyEl.classList.contains("dark-mode")?"dark":"light")}));"dark"===localStorage.getItem(i)&&(c.themeSwitcherEl.checked=!0,c.bodyEl.classList.add("dark-mode"),c.logoEl.classList.add("light-text"),c.headerLinksEl.forEach((e=>e.classList.add("light-text"))),c.headerInputEl.classList.add("header-input--dark"));const l="Favorites",s="favorites-total",d={listRef:document.querySelector(".favorite__list"),buttonRef:document.querySelector(".card__favorite")},{listRef:u,buttonRef:h}=d;JSON.parse(localStorage.getItem(l)),JSON.parse(localStorage.getItem(s));var g={};g=new URL(o("kyEFX").resolve("ku5PZ"),import.meta.url).toString();const m="https://static01.nyt.com/",f=document.documentElement.clientWidth,p=new Date,_=`${p.getDate()}/${p.getMonth()}/${p.getFullYear()}`,y="nyt://article/",v=e=>{let r={};try{r=e.results||e.response.docs}catch(e){console.log("Response ERROR!!!")}return r.map((e=>function(e){const r={};if(r.id=e.uri.replace(y,""),r.date=(()=>e.published_date?e.published_date:e.pub_date?e.pub_date:_)(),r.category=e.section||e.section_name,r.title=e.title||e.headline.main,r.abstract=e.abstract,e.media&&e.media.length&&e.media[0]["media-metadata"])if(e.media[0]["media-metadata"].length){const t=b(e.media[0]["media-metadata"]);/static01.nyt.com/i.test(t.url)||(t.url=m+t.url),r.imageUrl=t.url}else if(e.multimedia)if(e.multimedia.length){const t=b(e.multimedia);/static01.nyt.com/i.test(t.url)||(t.url=m+t.url),r.imageUrl=t.url,r.imageAlt=t.caption}else r.imageUrl=t(g);return r.url=e.url||e.web_url,r.isFavorite=!1,r.isRead=!1,r}(e)))};function b(e){e.sort(((e,t)=>e.width>t.width?1:-1));return e.find((e=>e.width>(f>=1280?395:f>=768?353:288)))}var E={};function k(e,r){const{id:n,category:a,title:o,abstract:c,imageUrl:i,imageAlt:l,date:s,url:d,isFavorite:u=!1,isRead:h=!1}=e,g=s.replace(/((\d){4})-((\d){2})-((\d){2})(\S)*/g,"$5/$3/$1");return function(e="list"){const r="read"===e?"Have read":`Already read \n        <svg width="18" height="18">\n          <use href="${t(E)}#icon-read"></use>\n        </svg>`,s=`<span class='card__already ${(e=>e?"":"card__already--false")(h)}'>${r}</span>`,m=e=>e?"class='favorite__text--false'":"",f=`<button type='button' class='card__favorite'>\n\n      <span ${m(u)}>Add to favorite\n        <svg  width="16" heigth="16">\n          <use href="${t(E)}#icon-like-nonactive"></use>\n        </svg>\n      </span>\n\n      <span ${m(!u)}>Remove from favorite\n        <svg width="16" height="16" class="box__icon remove-icon">\n          <use href="${t(E)}#icon-like-active"></use>\n        </svg>\n      </span>\n\n    </button>`;return`\n    <li id=${n} class='${e}__card card'>\n\n      <div class='card__container'>\n        <img class='card__img' src="${i}" \n          alt="${l??c}">\n        <span class='card__category'>${a}</span>\n        ${s}\n        ${f}\n      </div>\n\n      <h2 class='card__title'>${o}</h2>\n      <p class='card__abstract'>${c}</p>\n      <span class='card__date'>${g}</span>\n      <a class='card__read' href="${d}" target="_blank">Read more</a>\n\n    </li>`}(r)}E=new URL(o("kyEFX").resolve("cdK6d"),import.meta.url).toString();document.querySelectorAll(".list__card");const S=new class{fetchCards(e){try{return fetch(`https://api.nytimes.com/svc/search/v2/articlesearch.json?q=${this.searchQuery}&api-key=dWr4kZ2eThN3qFyvwxS66Oz0pgO5uwGr`).then((e=>e.json())).then((e=>e))}catch(e){console.error(e)}}fetchMostPopular(){try{return fetch("https://api.nytimes.com/svc/mostpopular/v2/viewed/1.json?api-key=dWr4kZ2eThN3qFyvwxS66Oz0pgO5uwGr").then((e=>e.json())).then((e=>e))}catch(e){console.error(e)}}get query(){return this.searchQuery}set query(e){this.searchQuery=e}constructor(){this.searchQuery=""}},w=document.querySelector(".card__list"),$=document.querySelector(".pagination__list"),q=9;let L=1;function x(e,t){w.innerHTML="";const r=(e-1)*q,n=Math.min(r+q,t.length);for(let e=r;e<n;e++){const r=t[e];w.insertAdjacentHTML("beforeend",r)}}function R(e){$.innerHTML="";for(let t=1;t<=e;t++){const e=`\n      <li>\n        <a href="#" class="pagination__page ${t===L?"pagination__page--current":""}" data-page="${t}">${t}</a>\n      </li>\n    `;$.insertAdjacentHTML("beforeend",e)}}S.fetchMostPopular().then((e=>{const t=v(e),r=t.map((e=>k(e))),n=Math.ceil(t.length/q);x(L,r),R(n)})),$.addEventListener("click",(function(e){e.preventDefault();const{target:t}=e;t.classList.contains("pagination__page")&&(L=Number(t.dataset.page),S.fetchMostPopular().then((e=>{const t=v(e),r=t.map((e=>k(e)));x(L,r),R(Math.ceil(t.length/q))})))}));const M=document.querySelector(".pag-btn__right"),F=document.querySelector(".pag-btn__left");M.addEventListener("click",(()=>{L++,S.fetchMostPopular().then((e=>{const t=v(e),r=t.map((e=>k(e))),n=Math.ceil(t.length/q);L<=n&&(x(L,r),R(n))}))})),F.addEventListener("click",(()=>{L>1&&(L--,S.fetchMostPopular().then((e=>{const t=v(e),r=t.map((e=>k(e)));x(L,r),R(Math.ceil(t.length/q))})))}));
//# sourceMappingURL=favorite.d164f92e.js.map
